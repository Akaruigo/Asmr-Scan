/*!
* Mui Player Desktop Plugin Javascript Library v1.6.0
* Date：2023-01-23
* Released under GPL-3.0 license
* https://muiplayer.js.org/
*/
"use strict";function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _createForOfIteratorHelper(e,t){var o="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!o){if(Array.isArray(e)||(o=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){o&&(e=o);var n=0,t=function(){};return{s:t,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,i=!0,r=!1;return{s:function(){o=o.call(e)},n:function(){var e=o.next();return i=e.done,e},e:function(e){r=!0,l=e},f:function(){try{i||null==o.return||o.return()}finally{if(r)throw l}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(o="Object"===o&&e.constructor?e.constructor.name:o)||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=new Array(t);o<t;o++)n[o]=e[o];return n}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e,t){"object"==("undefined"==typeof exports?"undefined":_typeof(exports))&&"object"==("undefined"==typeof module?"undefined":_typeof(module))?module.exports=t():"function"==typeof define&&_typeof(define.amd)?define(t):e.MuiPlayerDesktopPlugin=t()}(window,function(){return function(y){function u(){return{defaults:[{functions:"循环播放",name:"loopPlay",show:!0,model:"switch",selected:!1,onToggle:function(e,t,o){t(),e.event.currentTarget.querySelector(".toogle-switch").classList.contains("open")?b.$el.videoObject.loop=!0:b.$el.videoObject.loop=!1}},{functions:"播放速度",name:"playbackRate",show:!0,model:"select",childConfig:[{functions:"0.25"},{functions:"0.5"},{functions:"0.75"},{functions:"正常",selected:!0},{functions:"1.25"},{functions:"1.5"},{functions:"1.75"},{functions:"2"}],onToggle:function(e,t,o){t(),o();o=b.$method.getLangObject(),e=e.functions;isNaN(parseFloat(e))?(b.$el.videoObject.playbackRate=1,r.rst(o.dsps)):(b.$el.videoObject.playbackRate=parseFloat(e),r.rst(o.tsps.replace("?",e)))}}],subtitle:{functions:"字幕",name:"subtitle",childConfig:[{functions:"打开",name:"loopPlay",model:"switch",selected:!0},{functions:"选择语言",childConfig:[],onToggle:function(o,n,e){var l=o.getPanelOption(o.panelIndex,"parent").panelIndex,i=b.$el.videoObject.textTracks;i&&i instanceof TextTrackList?function(){for(var e=0;e<i.length;e++){var t=i[e];o.functions==t.label?(t.mode="showing",o.getPanelOption(l,"parent").childConfig[0].selected=!0,n()):"showing"==t.mode&&(t.mode="hidden")}}():r.rst("the textTracks api is not supported by the browser.")}}],onToggle:function(a,s,e){var c=a.event.currentTarget.querySelector(".toogle-switch").classList.contains("open"),u=b.$el.videoObject.textTracks;u&&u instanceof TextTrackList?function(){if(c)for(var e=0;e<u.length;e++){var t=u[e];"showing"==t.mode&&(t.mode="hidden")}else for(var o=a.getPanelOption(a.panelIndex,"parent").childConfig[1].childConfig,e=0;e<u.length;e++){var n,l=u[e],i=_createForOfIteratorHelper(o);try{for(i.s();!(n=i.n()).done;){var r=n.value;if(l.label==r.functions&&1==r.selected){l.mode="showing";break}}}catch(e){i.e(e)}finally{i.f()}}s()}():r.rst("the textTracks api is not supported by the browser.")}}}}function a(e){"statics"==e&&(m=(new u).defaults,h.initSubtitleOption()&&m.push(h.initSubtitleOption())),!m.map(function(e){return e.name}).includes("subtitle")&&"statics"!=e&&h.initSubtitleOption()&&m.push(h.initSubtitleOption());var t,o=b.$method.getLangObject();for(t in m){var n=m[t].name;"loopPlay"!=n?"playbackRate"!=n?"subtitle"!=n||(m[t].functions=o.subtitles,m[t].childConfig[0].functions=o.open,m[t].childConfig[1].functions=o.selectLangage):(m[t].functions=o.playbackSpeed,m[t].childConfig[3].functions=o.normal):m[t].functions=o.loopPlay}var l=_toConsumableArray(y.customSetting||[]);if(l instanceof Array){for(var i=0;i<l.length;i++){var r=m.map(function(e){return e.name});-1!=r.indexOf(l[i].name)&&m.splice(r.indexOf(l[i].name),1)}(function e(){for(var t=0;t<l.length;t++)!1===l[t].show&&(l.splice(t,1),e())})()}var a=(e=b.option).loop,s=e.live;if(1==a||!0===s)for(var c in m)if("loopPlay"==m[c].name){1==a&&(m[0].selected=!0),!0===s&&m.splice(0,m.length);break}(e=[].concat(_toConsumableArray(m),_toConsumableArray(l))).sort(function(e,t){e=e.zIndex||0,t=t.zIndex||0;return t<e?-1:e<t?1:0}),p.settingConfigs=e,function e(t,o){for(var n=0;n<t.length;n++)t[n].panelIndex=null==o?n.toString():o.toString()+"-"+n,t[n].childConfig instanceof Array&&0<t[n].childConfig.length&&e(t[n].childConfig,t[n].panelIndex)}(p.settingConfigs)}var t=this,g=(y=y||{},"number"==typeof y.fullScaling&&1<y.fullScaling?y.fullScaling:1.2),b={},d=new function(){return{disabledMousemoveEvent:!1,popupNodeInfo:{triggerButtonRect:{},popupRect:{}}}},p={name:"",settingConfigs:null},m=[],r={rst:function(e){b.$method[b.$method.dc("03702W03303B02C03302P037038")](e)}},c={ctxmenuWrapper:function(){return b.$el.mPlayer.querySelector("#ctxmenu-wrapper")},hideShortcutPanel:function(){var e=b.$el.mPlayer.querySelector("#mplayer-shortcut");e&&(e.style.display="none")},hideCtxmenuList:function(e){(e=e||{}).stopPropagation&&e.stopPropagation();var t=c.ctxmenuWrapper().querySelector(".ctxmenulist");t.style.opacity=0,b._this._global_.ctxmenuTimer_1=setTimeout(function(){t.style.display="none"},100)},onCtxmenuFocus:function(e){b._this._global_.ctxmenuTimer_1&&clearTimeout(b._this._global_.ctxmenuTimer_1),b._this._global_.ctxmenuTimer_2&&clearTimeout(b._this._global_.ctxmenuTimer_2),c.ctxmenuWrapper().style.display="block",c.hideShortcutPanel()},onCtxmenuBlur:function(e){(e=e||{}).stopPropagation&&e.stopPropagation(),c.hideCtxmenuList(),b._this._global_.ctxmenuTimer_2=setTimeout(function(){c.ctxmenuWrapper().style.display="none",c.ctxmenuWrapper().removeChild(e.target)},300)},disCtx:function(o,e){for(var t=0;t<o.length;t++){var n=e.map(function(e){return e.name}).indexOf(o[t].name);-1!=n&&e.splice(n,1)}(function e(){for(var t=0;t<o.length;t++)!1!==o[t].show&&o[t].name&&o[t].context||(o.splice(t,1),e())})()},getCtxmenu:function(){var e=new this.dcm,t=[];(t=_toConsumableArray(y.contextmenu||[]))instanceof Array&&this.disCtx(t,e);var o,e=[].concat(_toConsumableArray(t),_toConsumableArray(e)),n=b.$method.getLangObject(),l=_createForOfIteratorHelper(e);try{for(l.s();!(o=l.n()).done;){var i=o.value;if("shortcuts"==i.name){i.context=n.shortcuts;break}}}catch(e){l.e(e)}finally{l.f()}return e.sort(function(e,t){e=e.zIndex||0,t=t.zIndex||0;return t<e?-1:e<t?1:0}),e},createCtxmenu:function(e){var t=c.getCtxmenu();if(2==e.button&&0!=t.length&&!b.$el.mPlayer.hasAttribute("miniplayer")){var o=document.createElement("ul");o.setAttribute("class","ctxmenulist"),o.setAttribute("tabindex","0"),o.addEventListener("blur",c.onCtxmenuBlur),c.onCtxmenuFocus();for(var n=t.map(function(e){return e.name}),l=0;l<t.length;l++){var i=document.createElement("li");i.innerText=t[l].context,i.setAttribute("name",t[l].name),i.addEventListener("dblclick",function(e){e.stopPropagation()}),i.addEventListener("mousemove",function(e){e.stopPropagation()}),i.addEventListener("click",function(e){e.stopPropagation();e=n.indexOf(e.currentTarget.getAttribute("name"));t[e].click instanceof Function&&t[e].click(function(){b.$el.mPlayer.focus()})}),o.appendChild(i)}b.$method.removeNode(c.ctxmenuWrapper(),".ctxmenulist"),c.ctxmenuWrapper().appendChild(o),w.setElScale(o,{fontSize:14});var r=b.$el.mPlayer.getBoundingClientRect(),a=o.getBoundingClientRect(),s=e.clientX-r.left+a.width>r.width?r.width-a.width:e.clientX-r.left,r=e.clientY-r.top+a.height>r.height?r.height-a.height:e.clientY-r.top;o.style.top=r+"px",o.style.left=s+"px",o.focus(),setTimeout(function(){o.style.opacity=1},100)}},dcm:function(){var e=b.$method.dc;return[{name:e("03702W03303603802R039038037"),context:e("IY3JNBTGU"),click:function(){var e=b.$el.mPlayer.querySelector("#mplayer-shortcut");e&&(e.style.display="block"),b.$el.mPlayer.focus()}},{name:e("03103902X03403002P03D02T036"),context:e("02503902X02803002P03D02T036"),click:function(){window.open(e("02W03803803403701M01B01B02V02X03802W03902Q01A02R03303101B03103902X03403002P03D02T03601B02W02T03003003301903103902X03403002P03D02T036"))}}]},onContextmenuEvent:function(e){e.preventDefault()}},s={togglePictureIcon:function(){return document.pictureInPictureElement?'<svg class="off-picture" xmlns="http://www.w3.org/2000/svg"viewBox="0 0 24 24"fill="#ffffff"><path d="m19,7l-14,0l0,10l14,0l0,-10zm4,12l0,-14.02c0,-1.1 -0.9,-1.98 -2,-1.98l-18,0c-1.1,0 -2,0.88 -2,1.98l0,14.02c0,1.1 0.9,2 2,2l18,0c1.1,0 2,-0.9 2,-2zm-2,0.02l-18,0l0,-14.05l18,0l0,14.05z"/><path fill="none"d="m0,0l24,0l0,24l-24,0l0,-24z"/></svg>':'<svg class="on-picture" xmlns="http://www.w3.org/2000/svg"viewBox="0 0 24 24"fill="#ffffff"><path d="M19 11h-8v6h8v-6zm4 8V4.98C23 3.88 22.1 3 21 3H3c-1.1 0-2 .88-2 1.98V19c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2zm-2 .02H3V4.97h18v14.05z"/><path fill="none"d="M0 0h24v24H0V0z"/></svg>'},monitorPictureChange:function(){var t;b._this._global_.webpagePlugin.addMonitorPictureEvent||(b._this._global_.webpagePlugin.addMonitorPictureEvent=!0,t=function(){b.$el.mplayerFooter.querySelector("#picture-in-picture").innerHTML=s.togglePictureIcon()},b.$el.videoObject.addEventListener("enterpictureinpicture",function(e){b._this.emit("pip-change",{pip:!0}),t(),b.$data.isFullScreen&&b.$method.closeFullScreen(),b.$method.setTooltipText(b.$el.mplayerFooter.querySelector("#picture-in-picture"),b.$method.getLangObject().exitPictureInPicture)}),b.$el.videoObject.addEventListener("leavepictureinpicture",function(e){b._this.emit("pip-change",{pip:!1}),t(),b.$method.setTooltipText(b.$el.mplayerFooter.querySelector("#picture-in-picture"),b.$method.getLangObject().pictureInPicture)}))},onPictureInPicture:function(e){e.currentTarget.querySelector("svg").classList.contains("on-picture")?b.$el.videoObject!=document.pictureInPictureElement&&b.$el.videoObject.requestPictureInPicture():document.exitPictureInPicture(),s.monitorPictureChange()}},f={volumeContainer:null,el:null,$el:function(){return{volumeSize:f.volumeContainer.querySelector(".volume-size"),volumeCapacity:f.volumeContainer.querySelector(".volume-capacity"),volumeDragBall:f.volumeContainer.querySelector(".volume-drag-ball"),progressBar:f.volumeContainer.querySelector(".progress-bar")}},data:null,$data:function(){return{startY:null,moveY:null,_defaultVolumeSize:null,_capacityRect:{},_dragBallRect:{}}},toggleVolumeControl:function(e){var t;e=!0===f.getStorageVolume().muted?0:e,f.data&&(t=f.data._capacityRect.height*(e/100)-f.data._dragBallRect.height,f.el.volumeDragBall.style.bottom=(0<t?t:0)+"px",f.el.progressBar.style.height=e+"%",f.el.volumeSize.innerText=e+"%"),b.$el.mplayerFooter.querySelector("#volume-switch").innerHTML=f.toggleVolumeIcon()},setVolume:function(e,t){t=Number.parseFloat(f.data._defaultVolumeSize||0)+(null==t?100:t);return 100<=t?t=100:t<=0&&(t=0),t=Number.parseInt(t),e instanceof Object&&"number"==typeof e.volume&&(t=e.volume),f.setStorageVolume(t),b.$el.videoObject.volume=t/100,f.toggleVolumeControl(t),t},computeProgress:function(e,t){t(e/f.el.volumeCapacity.getBoundingClientRect().height*100)},keyEventHandle:function(e){var t=b.$method.getKeyCode(e);-1!=new Array(13,38,40).indexOf(t)&&(e.stopPropagation(),e.preventDefault()),13!=t?38!=t?40==t&&n.bottomKeyDown():n.topKeyDown():f.onClickEvent({currentTarget:b.$el.mplayerFooter.querySelector("#volume-switch")},!0)},mouseEventHandle:function(t){switch(t.type){case"mousedown":!function(){f.data.startY=t.clientY;var e=f.el.volumeCapacity.getBoundingClientRect().bottom-t.clientY;f.computeProgress(e,function(e){b.$el.videoObject.muted&&(b.$el.videoObject.muted=!1);e=f.setVolume(!1,e);b._this._global_.webpagePlugin.startDownVolumeSize=e,f.data._defaultVolumeSize=f.el.progressBar.style.height.substr(0,f.el.progressBar.style.height.length-1)||0}),f.el.volumeDragBall.style.boxShadow="0 0 20px 3px "+b.$habit.themeColor,h.focusToggle("OFF"),f.volumeContainer.addEventListener("mousemove",f.mouseEventHandle),f.volumeContainer.addEventListener("mouseup",f.mouseEventHandle)}();break;case"mousemove":!function(){f.data.moveY=t.clientY,f.data.startY||(f.data.startY=t.clientY);var e=f.data.startY-f.data.moveY;f.computeProgress(e,function(e){e=f.setVolume(!1,e);b._this._global_.webpagePlugin.endDownVolumeSize=e})}();break;case"mouseup":f.data._defaultVolumeSize=0,f.el.volumeDragBall.style.boxShadow="none",f.volumeContainer.removeEventListener("mousemove",f.mouseEventHandle),f.volumeContainer.removeEventListener("mouseup",f.mouseEventHandle)}},getStorageVolume:function(){var e={};try{e=JSON.parse(window.localStorage.getItem("mp-player-volume"))||{}}catch(e){}return e},setStorageVolume:function(e,t){var o=f.getStorageVolume(),n=null!=t?o.volume||100:e,o=null!=t?t:b.$el.videoObject instanceof Element&&b.$el.videoObject.muted,e=(new Date).setMonth((new Date).getMonth()+1),t=(new Date).getTime();window.localStorage.setItem("mp-player-volume",JSON.stringify({volume:n,muted:o,expiration:e,creation:t}))},toggleVolumeIcon:function(){var e='<svg class="volume-full"fill="#ffffff"viewBox="0 0 24 24"xmlns="http://www.w3.org/2000/svg"><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/><path d="M0 0h24v24H0z" fill="none"/></svg>',t='<svg fill="#ffffff"viewBox="0 0 24 24"xmlns="http://www.w3.org/2000/svg"><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02z"/><path d="M0 0h24v24H0z" fill="none"/></svg>',o='<svg class="volume-close"fill="#ffffff"viewBox="0 0 24 24"xmlns="http://www.w3.org/2000/svg"><path d="M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z"/><path d="M0 0h24v24H0z" fill="none"/></svg>',n=f.getStorageVolume();return n.expiration<=(new Date).getTime()?e:!0===n.muted||0==n.volume?o:n.volume<50?t:e},createVolumePopup:function(){var e=(new w.popupInstance).createPopupElement();return e.setAttribute("popup-name","volume"),e.innerHTML='<div class="volume-container keyboard-input"id="volume-container"tabindex="0"><div class="volume-size">0%</div><div class="volume-capacity"><div class="volume-drag-ball"></div><div class="progress-bar"></div></div></div>',e.querySelector(".progress-bar").style.backgroundColor=b.$habit.themeColor,f.volumeContainer=e.querySelector("#volume-container"),f.el=new f.$el,f.data=new f.$data,f.volumeContainer.addEventListener("mousedown",f.mouseEventHandle),f.volumeContainer.addEventListener("keydown",f.keyEventHandle),f.volumeContainer.addEventListener("blur",function(){(new w.popupInstance).togglePopupVisible("OFF")}),e},showVolumePopup:function(e){var t;e=e||{},b.$data.isTouchMove||((t=b.$el.mPlayer.querySelector(".mp-popup"))||(t=f.createVolumePopup(),"keydown"==e.type&&setTimeout(function(){t.querySelector("#volume-container").focus()},100),b.$el.mplayerFooter.insertBefore(t,b.$el.mplayerFooter.childNodes[0]),b.$data.isFullScreen&&(w.setElScale(t,["width","height"]),w.setElScale(t.querySelector(".volume-capacity"),["width","height"]),w.setElScale(t.querySelector(".volume-drag-ball"),["width","height"]),w.setElScale(t.querySelector(".volume-container"),["fontSize"])),f.data._capacityRect=f.el.volumeCapacity.getBoundingClientRect(),f.data._dragBallRect=f.el.volumeDragBall.getBoundingClientRect(),e=f.getStorageVolume(),f.setVolume(e),(new w.popupInstance).setVisiblePopup(t,b.$el.mplayerFooter.querySelector("#volume-switch"))))},onClickEvent:function(e,t){var o,n;!1!==e.currentTarget.exist&&(e.currentTarget.querySelector("svg").classList.contains("volume-close")?(f.setStorageVolume(null,!1),o=f.getStorageVolume().volume||100,n=b._this._global_.webpagePlugin.endDownVolumeSize,e=b._this._global_.webpagePlugin.startDownVolumeSize,f.toggleVolumeControl(0==n?e:n||o),b.$el.videoObject.muted=!1):(f.setStorageVolume(null,!0),f.toggleVolumeControl(0),b.$el.videoObject.muted=!0),!0===t&&(b.$method.createTimerCloseControl(),w.showHandleIcon("volume-icon")))}},h={currentFocusPanelId:"",isFocusActive:!1,backPanel:function(e){var t=h.getPanelOption(e,"parent");h.showPanel(t,"previous",e)},selected:function(e){for(var t=b.$el.mPlayer.querySelector(".mp-popup"),o=t.querySelectorAll(".mp-panel-selected"),n=0;n<o.length;n++)o[n].classList.remove("mp-panel-selected");t.querySelector('[panel-index="'+e+'"]').classList.add("mp-panel-selected");for(var l=h.getPanelOption(e,"parent").childConfig||[],n=0;n<l.length;n++)l[n].panelIndex==e?l[n].selected=!0:l[n].selected&&"switch"!=l[n].model&&(l[n].selected=!1)},switched:function(e){var t=h.getPanelOption(e);t.selected=!t.selected;e=b.$el.mPlayer.querySelector('.mp-popup [panel-index="'+e+'"] .toogle-switch');e.classList.remove(t.selected?"close":"open"),e.classList.add(t.selected?"open":"close")},triggerSelected:function(t,e){var o,n;e.stopPropagation(),t&&(t.childConfig instanceof Array&&0<t.childConfig.length?h.showPanel(t):"switch"!=t.model&&!0===t.selected||(n=null,(n=(o=h.getPanelOption(t.panelIndex,"parent"))instanceof Array?t:o).onToggle instanceof Function&&n.onToggle({functions:t.functions,panelIndex:t.panelIndex,getPanelOption:h.getPanelOption,event:e},function(e){"switch"==t.model?h.switched(t.panelIndex):h.selected(t.panelIndex),e instanceof Function&&e()},function(e){o instanceof Object&&o.childConfig instanceof Array&&0<o.childConfig.length?setTimeout(function(){h.backPanel(o.panelIndex)},"number"==typeof e?e:100):console.warn("no subpanel configuration options are available")})))},setScalePopup:function(e){if(b.$data.isFullScreen&&e instanceof Element){w.setElScale(e,["width","height",e.classList.contains("mp-popup")?"fontSize":""]),w.setElScale(e.querySelector(".toogle-switch"),["width","height"]),w.setElScale(e.querySelector(".toogle-switch .ball"),["width","height"]);for(var t=e.querySelectorAll(".mp-menuitem"),o=0;o<t.length;o++)w.setElScale(t[o],["height","lineHeight"])}},isNextReady:!0,showPanel:function(e,o,t){var n,s,c,u,l,p,i,r,a;h.isNextReady&&(n=h.createSettingPopup(e),s=b.$el.mPlayer.querySelector(".mp-popup"),c=s.querySelector(".mp-panel-item"),s.appendChild(n.childNodes[0]),e=e instanceof Array?"homeSetting":e.functions,(u=s.querySelector('[panel-name="'+e+'"]')).classList.add("mp-panel-item"),h.setScalePopup(u),l=s.getBoundingClientRect(),p=c.getBoundingClientRect(),i=u.getBoundingClientRect(),e=(e=b.$el.mPlayer.getBoundingClientRect()).height-(e.height-i.bottom)-(e.top+10),r=i.height>=e?e:i.height,u.style.width=i.width+"px",u.style.height=r+"px",u.style.right=("previous"==o?p.width:-i.width)+"px",e=u.querySelector(".mp-panel-menu .mp-panel-selected"),t=u.querySelector('[panel-index="'+t+'"]'),a=e||t||u.querySelector("[panel-index]"),setTimeout(function(){a.focus()},250),setTimeout(function(){for(var e=s.querySelectorAll(".mp-panel"),t=0;t<e.length;t++)e[t].classList.contains("mp-popup-animation")||e[t].classList.add("mp-popup-animation");s.classList.contains("mp-popup-animation")||s.classList.add("mp-popup-animation"),c.style.opacity=0,c.style.right=("previous"==o?-p.width:i.width)+"px",l.width!=i.width&&(s.style.width=i.width+"px"),l.height!=r&&(s.style.height=r+"px"),u.style.right="0px",h.currentFocusPanelId=""},30),h.isNextReady=!1,setTimeout(function(){var e=s.getBoundingClientRect(),t=e.bottom,o=e.height,n=e.left,l=e.right,i=e.top,r=e.width,a=e.x,e=e.y;d.popupNodeInfo.popupRect={bottom:t,height:o,left:n,right:l,top:i,width:r,x:a,y:e},p.top<u.getBoundingClientRect().top&&(d.popupNodeInfo.popupRect.top=p.top,d.popupNodeInfo.popupRect.height=p.height),h.isNextReady=!0,s.removeChild(c)},250))},getPanelOption:function(i,r){var a=!1,s=null;return function e(t,o){for(var n=0;n<t.length&&!a;n++){var l=t[n];l.panelIndex==i?(a=!0,s="parent"==r?o:l):l.childConfig instanceof Array&&0<l.childConfig.length&&e(l.childConfig,l)}}(p[p.name],p[p.name]),s},setCurrentModelEl:function(e){var t=e.childConfig,o=e.model||"select",n="";if("select"==o&&t instanceof Array&&0<t.length){for(var l=0;l<t.length;l++)if(!0===t[l].selected){n=t[l].functions||"";break}}else"switch"==o&&(n='<div class="toogle-switch '+(e.selected?"open":"close")+'" id="toggle-fit" style="background: '+b.$habit.themeColor+';"><div class="ball"></div></div>');return n},createSettingPopup:function(t){var e=(new w.popupInstance).createPopupElement();e.setAttribute("popup-name","setting"),t instanceof Array?e.innerHTML='<div class="mp-panel" panel-name="homeSetting"><div class="mp-panel-menu"></div></div>':(e.innerHTML='<div class="mp-panel mp-panel-child" panel-name="'+t.functions+'"><div class="mp-panel-menu"><ul class="mp-menuitem mp-panel-header"><li class="title"><div class="mp-menuitem-content left-arrow-icon">'+t.functions+"</div></li><li></li></ul></div></div>",e.querySelector(".mp-panel-header .title").addEventListener("click",function(e){e.stopPropagation(),h.isFocusActive=!0,h.backPanel(t.panelIndex)}));for(var o=t instanceof Array?t:t.childConfig,n=0;n<o.length;n++){var l,i,r,a=o[n]||{},s=a.model||"select";a.functions&&"string"==typeof a.functions&&((l=document.createElement("ul")).setAttribute("class","mp-menuitem"),l.setAttribute("panel-index",a.panelIndex),l.setAttribute("tabindex","0"),!0!==a.selected||"select"!=s||t instanceof Array||l.classList.add("mp-panel-selected"),(i=document.createElement("li")).innerHTML=a.functions,r=document.createElement("li"),(s=document.createElement("div")).setAttribute("class","mp-menuitem-content"),a.childConfig instanceof Array&&0<a.childConfig.length&&s.classList.add("arrow-icon"),"switch"==a.model&&s.classList.add("switch-icon"),s.innerHTML=h.setCurrentModelEl(a),r.appendChild(s),l.appendChild(i),l.appendChild(r),l.addEventListener("click",function(e){var t=h.getPanelOption(e.currentTarget.getAttribute("panel-index"));h.triggerSelected(t,e)}),l.addEventListener("mousedown",function(){h.focusToggle("OFF")}),l.addEventListener("blur",function(e){h.isFocusActive=!1,h.currentFocusPanelId=""}),l.addEventListener("focus",function(e){h.isFocusActive=!0,h.currentFocusPanelId=e.currentTarget.getAttribute("panel-index")}),l.addEventListener("keydown",function(e){h.settingOnKeyDownAction(e)}),e.querySelector(".mp-panel-menu").appendChild(l))}return e},showSettingPopup:function(e,t){if(e=e||{},!b.$data.isTouchMove){var o=b.$el.mPlayer.querySelector(".mp-popup");if(!o){a(),o=h.createSettingPopup(p[p.name]),setTimeout(function(){o.querySelector("[panel-index]").focus()},100),b.$el.mplayerFooter.insertBefore(o,b.$el.mplayerFooter.childNodes[0]),h.setScalePopup(o),(new w.popupInstance).setVisiblePopup(o,e.currentTarget,t);for(var n=o.getBoundingClientRect(),t=b.$el.mPlayer.getBoundingClientRect(),t=t.height-(t.height-n.bottom)-(t.top+10),l=n.height>=t?t:n.height,i=o.querySelectorAll(".mp-popup .mp-panel,.mp-popup .mp-panel-menu"),r=0;r<i.length;r++)i[r].style.width=n.width+"px",i[r].style.height=l+"px";o.style.width=n.width+"px",o.style.height=l+"px",o.querySelector(".mp-panel").classList.add("mp-panel-item")}}},focusToggle:function(e){var t=b.$el.mPlayer;"ON"==e?t.classList.contains("mp-keyboard-focus")||t.classList.add("mp-keyboard-focus"):t.classList.contains("mp-keyboard-focus")&&t.classList.remove("mp-keyboard-focus")},settingOnKeyDownAction:function(e){var t=b.$el.mPlayer.querySelector(".mp-popup"),o=b.$method.getKeyCode(e);if(h.focusToggle("ON"),-1!=new Array(13,32,37,38,39,40).indexOf(o)&&(e.stopPropagation(),e.preventDefault()),32!=o&&13!=o)if(37!=o)if(38!=o)if(39!=o){if(40==o){l=[];l=(n=h.getPanelOption(h.currentFocusPanelId,"parent"))instanceof Array?n:(n||{}).childConfig||[];for(r=0;r<l.length;r++)if(l[r].panelIndex==h.currentFocusPanelId){r!=l.length-1?(i=l[r+1].panelIndex,t.querySelector('[panel-index="'+i+'"]').focus()):t.querySelector('[panel-index="'+l[0].panelIndex+'"]').focus();break}}}else(n=h.getPanelOption(h.currentFocusPanelId,"current"))&&n.childConfig instanceof Array&&0<n.childConfig.length&&h.showPanel(n,"next");else{var n,l=[];l=(n=h.getPanelOption(h.currentFocusPanelId,"parent"))instanceof Array?n:(n||{}).childConfig||[];for(var i,r=0;r<l.length;r++)if(l[r].panelIndex==h.currentFocusPanelId){0==r?t.querySelector('[panel-index="'+l[l.length-1].panelIndex+'"]').focus():(i=l[r-1].panelIndex,t.querySelector('[panel-index="'+i+'"]').focus());break}}else{var a=t.querySelector(".mp-panel-header .title");a&&a.click()}else{a=h.getPanelOption(h.currentFocusPanelId);h.triggerSelected(a,e)}},onSettingKeyDown:function(e,t){e.preventDefault(),b.$el.mplayerFooter.querySelector(".mp-popup").querySelector("[panel-index]").focus(),h.focusToggle("ON"),h.settingOnKeyDownAction(e)},initSubtitleOption:function(){var e=b.$el.videoObject?b.$el.videoObject.textTracks:"";if(e&&e instanceof TextTrackList&&0<e.length){var t=(new u).subtitle;t.childConfig[1].childConfig.splice(0,t.childConfig[1].childConfig.length);for(var o=0;o<e.length;o++){var n=e[o];t.childConfig[1].childConfig.push({functions:n.label,selected:"showing"==n.mode})}return t}}},n={toggleVisible:function(e,t){if(!0===e&&b.$data.showScreenControls)return b.$method.createTimerCloseControl(),void(b._this._global_.webpagePlugin.hiddleControl||t instanceof Function&&t());!0!==e||b.$data.showScreenControls||(b.$method.toggleControlsDisplay({type:"showControls"}),b._this._global_.webpagePlugin.hiddleControl=!0,setTimeout(function(){b._this._global_.webpagePlugin.hiddleControl=!1,t instanceof Function&&t()},300))},escKeyDown:function(){(new w.popupInstance).togglePopupVisible("OFF"),h.focusToggle("OFF"),b.$el.mPlayer.focus()},confirmKeyDown:function(e){(new t.interface)._onAgentMpTap("click"),n.escKeyDown()},leftKeyDown:function(){var e;!0!==b.option.live&&(n.toggleVisible(!0),e=b.$el.videoObject.currentTime-5,b.$data.currentTime=0<e?e:.1,b.$el.videoObject.currentTime=b.$data.currentTime,w.showHandleIcon("progress-back"),(new w.popupInstance).togglePopupVisible("OFF"))},rightKeyDown:function(){var e,t;!0!==b.option.live&&(n.toggleVisible(!0),e=b.$data,(t=b.$el.videoObject.currentTime+5)<=e.duration?b.$data.currentTime=t:b.$data.currentTime=Number.parseInt(e.duration),b.$el.videoObject.currentTime=b.$data.currentTime,w.showHandleIcon("progress-forward"),(new w.popupInstance).togglePopupVisible("OFF"))},topKeyDown:function(){!1!==b.$el.mplayerFooter.querySelector("#volume-switch").exist&&(n.toggleVisible(!0,function(){var e=f.getStorageVolume(),t=e.volume;!0===e.muted?(b.$el.videoObject.muted=!1,t=5):t+=5,f.showVolumePopup(),f.setVolume(!1,t)}),w.showHandleIcon("volume-icon"))},bottomKeyDown:function(){!1!==b.$el.mplayerFooter.querySelector("#volume-switch").exist&&(n.toggleVisible(!0,function(){var e=f.getStorageVolume(),t=e.volume;!0===e.muted?(b.$el.videoObject.muted=!1,t=5):t-=5,f.showVolumePopup(),f.setVolume(!1,t)}),w.showHandleIcon("volume-icon"))},onDocKeydown:function(e){var t=b.$method.getKeyCode(e);-1!=new Array(37,38,39,40,32,13).indexOf(t)&&(e.stopPropagation(),e.preventDefault()),70!=t?77!=t?27!=t?32!=t&&75!=t?37!=t?38!=t?39!=t?40==t&&n.bottomKeyDown():n.rightKeyDown():n.topKeyDown():n.leftKeyDown():n.confirmKeyDown(e):n.escKeyDown():f.onClickEvent({currentTarget:b.$el.mplayerFooter.querySelector("#volume-switch")},!0):(e=b.$el.mplayerFooter.querySelector("#full-switch"))instanceof Element&&e.click()}},v={},w={popupInstance:function(){this.createPopupElement=function(){var e=document.createElement("div");return e.setAttribute("class","mp-popup"),e},this.setVisiblePopup=function(e,t){var o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;this.togglePopupVisible("ON");var n=b.$data.isFullScreen,l=t.getBoundingClientRect(),i=e.getBoundingClientRect(),r=b.$el.mPlayer.getBoundingClientRect(),a=b.$el.touchEffective instanceof Element?b.$el.touchEffective.getBoundingClientRect():{},n=r.width-l.left+r.left-i.width/2-l.width/2+o*(n?g:1);e.style.right=(12<=n?n:12)+"px";r=r.height-(a.top||l.top-5)+r.top;return e.style.bottom=r+"px",d.popupNodeInfo.triggerButtonRect=t.getBoundingClientRect(),d.popupNodeInfo.popupRect=e.getBoundingClientRect(),e},this.togglePopupVisible=function(e){var t=!!b.$el.mPlayer&&b.$el.mPlayer.querySelector(".mp-popup");t&&(t.classList.add("popup-toggle"),"OFF"==e?(b.$el.mPlayer.focus(),t.style.opacity=0,setTimeout(function(){t.parentNode&&t.parentNode.removeChild(t)},110),b._this._global_.webpagePlugin.showSettingState=!1,b.$method.createTimerCloseControl(),document.removeEventListener("mousemove",w.onDocMousemoveEvent)):(setTimeout(function(){t.style.opacity=1},5),setTimeout(function(){t.classList.remove("popup-toggle")},110),b._this._global_.webpagePlugin.showSettingState=!0,setTimeout(function(){b.$method.createTimerCloseControl({type:"cancel"})},100),document.addEventListener("mousemove",w.onDocMousemoveEvent)))}},onEffectiveOverEvent:function(e){var t=(e=e||{}).type||"";if(!b._this._global_.webpagePlugin.showSettingState){var o=y.prompt,n=void 0===o?{}:o,l=function(e){var t=b.$el.touchEffective.querySelectorAll("#progress-total,#progress-buffered,#progress-play,#progress-prompt,#progress-seekline");if(e){for(var o=0;o<t.length;o++)t[o].classList.add("progress-hover-scale");b.$el.progressBall.classList.add("hover-scale"),b.$el.touchEffective.querySelector(".mp-tooltip").style.display="block",b.$el.touchEffective.querySelector(".mp-thumbnails").style.display="block",b.$el.touchEffective.querySelector(".progress-seekline").style.visibility="visible",!0===n.hoverShow&&(b.$el.touchEffective.querySelector(".prompts-container").style.visibility="visible")}if(!e){for(o=0;o<t.length;o++)t[o].classList.remove("progress-hover-scale");b.$el.progressBall.classList.remove("hover-scale"),b.$el.touchEffective.querySelector(".mp-tooltip").style.display="none",b.$el.touchEffective.querySelector(".mp-thumbnails").style.display="none",b.$el.touchEffective.querySelector(".progress-seekline").style.visibility="hidden",!0===n.hoverShow&&(b.$el.touchEffective.querySelector(".prompts-container").style.visibility="hidden")}};switch(t){case"mouseover":l(!0),w.showTimeTooltip(e),w.showThumbnails(e),v._showSeekLine&&v._showSeekLine(e),b.$el.touchEffective.addEventListener("mousemove",w.onEffectiveOverEvent),b.$el.touchEffective.addEventListener("mouseout",w.onEffectiveOverEvent);break;case"mousemove":l(!0),w.showTimeTooltip(e),w.showThumbnails(e),v._showSeekLine&&v._showSeekLine(e);break;case"mouseout":l(!1),b.$el.touchEffective.removeEventListener("mousemove",w.onEffectiveOverEvent),b.$el.touchEffective.removeEventListener("mouseout",w.onEffectiveOverEvent)}}},addControlTooltip:function(e){for(var t=b.$el.mplayerFooter.querySelectorAll(".footer-control"),o=0;o<t.length;o++)t[o].getAttribute("tooltip")&&(t[o].addEventListener("mouseover",function(e){var t,o,n,l=document.createElement("div");l.setAttribute("class","mp-tooltip"),l.innerText=e.currentTarget.getAttribute("tooltip"),!1!==b.$el.mplayerFooter.querySelector(".mp-tooltip").exist||b.$data.isTouchMove||(b.$el.mplayerFooter.insertBefore(l,b.$el.mplayerFooter.childNodes[0]),t=e.currentTarget.getBoundingClientRect(),o=l.getBoundingClientRect(),n=b.$el.mPlayer.getBoundingClientRect(),e=b.$el.touchEffective instanceof Element?b.$el.touchEffective.getBoundingClientRect():{},o=n.width-t.left+n.left-o.width/2-t.width/2,l.style.right=(16<=o?o:16)+"px",n=n.height-(e.top||t.top-5)+n.top,l.style.bottom=n+"px")}),t[o].addEventListener("mouseout",function(e){b.$method.removeNode(b.$el.mplayerFooter,".mp-tooltip")}))},thumbnailStyleAtBottom:function(){return b.$data.isFullScreen?25.6*g:25.92},showThumbnails:function(e){var t,o,n,l=b.$el.touchEffective.querySelector(".mp-thumbnails"),i=b.$el.mPlayer.querySelector("#mplayer-media-wrapper").getBoundingClientRect(),r=b.$el.touchEffective.getBoundingClientRect(),a=0,s=0,c=y.thumbnails||{},u=c.preview||[],p=c.tile||[10,10],d=c.scale||[160,90],g=p[0]||10,p=p[1]||10,m=d[0]||160,f=d[1]||90,h=c.async,v=g*p;(0<u.length||"function"==typeof h)&&(o=function(){var e=a%g==0?0:parseInt(a%g)*m,t=a/g<1?0:parseInt(a/g)*f;!function(){!1===l.exist&&((l=document.createElement("div")).setAttribute("class","mp-thumbnails thumbnails-scale"),l.style.outline="2px #FFFFFF solid",l.style.width=m+"px",l.style.height=f+"px",l.style.position="absolute",l.style.pointerEvents="none");var e=b.$el.touchEffective.querySelector('[data-playimage-index="'+s+'"]');!1===e.exist?((e=document.createElement("div")).setAttribute("class","preview-image"),e.setAttribute("data-playimage-index",s),e.style.width="100%",e.style.height="100%",l.appendChild(e),b.$el.touchEffective.appendChild(l)):l.appendChild(e),u[s]&&!e.style.backgroundImage&&(e.style.backgroundImage="url("+u[s]+")");for(var t=b.$el.touchEffective.querySelectorAll(".preview-image"),o=0;o<t.length;o++){var n=t[o].getAttribute("data-playimage-index");t[o].style.display=n!=s?"none":"block"}}();var o=l.getBoundingClientRect();b.$el.touchEffective.querySelector('[data-playimage-index="'+s+'"]').style.backgroundPosition=-e+"px "+-t+"px";e=w.thumbnailStyleAtBottom();l.style.bottom=Math.round(e)+"px";t=n-o.width/2,e=r.left-i.left+t,o=i.width-(r.left-i.left+t+o.width);12<=e&&12<=o&&(l.style.left=t+"px")},n=e.clientX-r.left,b.$method.computeProgress(n,b.$el.touchEffective,function(e){100<=e?e=100:e<=0&&(e=0),t=parseInt(e/100*b.$data.duration),a=t,s=parseInt(a/v),"function"==typeof h&&(h(e={client:{},put:function(e){e.forEach(function(e){var t=e.index,e=e.src;y.thumbnails.preview||(y.thumbnails.preview=[]),y.thumbnails.preview[t]=e})}}),e.client.receive instanceof Function&&e.client.receive({time:t,thumbnail_image_index:s})),o()}))},showTimeTooltip:function(e){var l=b.$el.touchEffective.getBoundingClientRect(),i=b.$el.mPlayer.querySelector("#mplayer-media-wrapper").getBoundingClientRect(),r=e.clientX-l.left;b.$method.computeProgress(r,b.$el.touchEffective,function(e){100<=e?e=100:e<=0&&(e=0);var t=e/100*b.$data.duration,o=b.$method.formatCurrentTime(t),n=b.$el.touchEffective.querySelector(".mp-tooltip");!1===n.exist&&((n=document.createElement("div")).setAttribute("class","mp-tooltip"),b.$el.touchEffective.appendChild(n));e=w.thumbnailStyleAtBottom();n.style.bottom=Math.round(e+2)+"px";t=n.getBoundingClientRect();n.innerText=o;e=r-t.width/2,o=l.left-i.left+e,t=i.width-(l.left-i.left+e+t.width);12<=o&&12<=t&&(n.style.left=e+"px")})},addFocusKeyboardHandle:function(){for(var e=b.$el.mPlayer.querySelectorAll(".keyboard-input"),t=0;t<e.length;t++)e[t].addEventListener("keydown",function(e){var t=b.$method.getKeyCode(e),o=e.currentTarget.getAttribute("id");-1!=new Array(13,32).indexOf(t)&&((new w.popupInstance).togglePopupVisible("OFF"),32!=t&&("setting-switch"!=o?"volume-switch"!=o?e.currentTarget.click():f.showVolumePopup(e):h.showSettingPopup(e)))}),e[t].addEventListener("mousedown",function(e){b._this._global_.webpagePlugin.inputMousedownFlag=!0,h.focusToggle("OFF"),b.$method.createTimerCloseControl()}),e[t].addEventListener("focus",function(e){setTimeout(function(){b._this._global_.webpagePlugin.inputMousedownFlag||h.focusToggle("ON"),b._this._global_.webpagePlugin.inputMousedownFlag=!1,w.onMpMousemoveEvent(),document.activeElement.classList.contains("keyboard-input")&&b.$method.createTimerCloseControl({type:"cancel"})},10)}),e[t].addEventListener("blur",function(){b.$el.mPlayer.querySelector(".mplayer-sidebar.open")||b.$method.createTimerCloseControl()})},onMpMousemoveEvent:function(){d.disabledMousemoveEvent||(b.$data.showScreenControls?b._this._global_.webpagePlugin.showSettingState||b.$method.createTimerCloseControl():b.$method.toggleControlsDisplay({type:"showControls"}),b._this._global_.webpagePlugin.forControlsClose=!1)},onMpMouseleaveEvent:function(e){d.disabledMousemoveEvent||(b._this._global_.webpagePlugin.showSettingState||b._this._global_.webpagePlugin.forControlsClose||b.$data.isTouchMove||b.$method.toggleControlsDisplay({type:"hideControls"}),b._this._global_.webpagePlugin.forControlsClose=!0)},onDocMousemoveEvent:function(e){var t=d.popupNodeInfo.popupRect,o=d.popupNodeInfo.triggerButtonRect,n=t.left,l=t.left+t.width,i=t.top,r=t.top+t.height,l=e.clientX>n&&e.clientX<l&&e.clientY>i&&e.clientY<r,i=o.left-15,r=o.left+o.width+15,t=t.bottom-5,o=o.bottom+5,o=e.clientX>i&&e.clientX<r&&e.clientY>t&&e.clientY<o;l||o||!h.isNextReady||(new w.popupInstance).togglePopupVisible("OFF")},setElScale:function(e,t){var o=b.$data.isFullScreen,n={};if(Array.isArray(t)?t.forEach(function(e){n[e]=""}):n=t,e instanceof Element){var l=function(e){return Math.round(e)},i=function(e){return Number(e.replace("px",""))},r=e.getBoundingClientRect(),a=e.getAttribute("stylesheet");try{a=a?JSON.parse(a):{}}catch(e){}var s,c,u,p,d=function(){e.style.lineHeight=o?l((n.lineHeight||r.height)*g)+"px":(n.lineHeight||l(r.height*g))+"px"};for(s in n)switch(s){case"width":p=void 0,o?(p=l((n.width||r.width)*g),e.style.width=(p%2==0?p:p+1)+"px"):e.style.width=n.width?n.width+"px":a.width||l(r.width/g)+"px";break;case"height":u=void 0,o?(u=l((n.height||r.height)*g),e.style.height=(u%2==0?u:u+1)+"px"):e.style.height=n.height?n.height+"px":a.height||l(r.height/g)+"px";break;case"fontSize":c=void 0,c=document.defaultView.getComputedStyle(e,null).fontSize,e.style.fontSize=o?l((n.fontSize||i(c))*g)+"px":n.fontSize?n.fontSize+"px":a.fontSize||l(i(c)/g)+"px";break;case"lineHeight":case"transform":d()}}},toggles:function(){this.pageFull=function(e){function t(){l.contains("page-fullscreen")||(b._this._global_.webpagePlugin.isPagefull=!0,b.$el.mPlayer.classList.add("page-fullscreen"),n[0].style.display="none",n[1].style.display="block",n[0].parentNode.setAttribute("tooltip",b.$method.getLangObject().exitPageScreen),b._this.emit("pagefull-change",{pagefull:!0})),e instanceof Object&&b.$method.changeVideoSize({type:"pagefulll"})}function o(){l.contains("page-fullscreen")&&(b._this._global_.webpagePlugin.isPagefull=!1,b.$el.mPlayer.classList.remove("page-fullscreen"),n[0].style.display="block",n[1].style.display="none",n[0].parentNode.setAttribute("tooltip",b.$method.getLangObject().pageScreen),b._this.emit("pagefull-change",{pagefull:!1})),e instanceof Object&&b.$method.changeVideoSize({type:"pagefulll"})}var n=b.$el.mPlayer.querySelectorAll("._fullpage,._unfullpage"),l=b.$el.mPlayer.classList;"change"==e?o():"initFullFixed"==e?t():((b.$el.mPlayer.classList.contains("page-fullscreen")?o:t)(),b.$data.isFullScreen&&b.$method.fullToggle())},this.timeControls=function(e){var n=b.$el.mPlayer.querySelector("#current-time");e?function e(){var t=new Date,o=t.getHours()<10?"0"+t.getHours():t.getHours(),t=t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes();n&&(n.innerHTML=o+":"+t,n.style.display="inline-block"),b._this._global_.webpagePlugin.timer_1&&clearInterval(b._this._global_.webpagePlugin.timer_1),b._this._global_.webpagePlugin.timer_1=setTimeout(function(){b.$data.isFullScreen&&b.$data.showScreenControls&&e()},1e3)}():n&&(n.style.display="none")},this.scaleControls=function(e){var t,o,n,l,i,r,a,s,c,u,p=b.$el.mPlayer.classList;e&&p.contains("fullscreen-scaling")||(e||p.contains("fullscreen-scaling"))&&(o=y.fullScalingControls||[],(t=function(e){for(var t=0;t<e.length;t++)for(var o=b.$el.mPlayer.querySelectorAll(e[t].selector),n=0;n<o.length;n++)w.setElScale(o[n],e[t].attr)})(o),t([{selector:".mplayer-header,.mplayer-footer",attr:["height"]},{selector:".header-control,.footer-control,.mplayer-sidebar",attr:["width","fontSize"]},{selector:"#mplayer-loading .mplayer-loading__circular",attr:{width:40,height:40}},{selector:".mplayer-shortcut",attr:{width:430}},{selector:".mplayer-shortcut .title",attr:{fontSize:16}},{selector:".mplayer-shortcut .close-shortcut-panel",attr:{width:24,height:24}},{selector:".mplayer-shortcut ul",attr:{fontSize:14}},{selector:"#progress-total,#progress-buffered,#progress-play,#progress-prompt,#progress-seekline",attr:{height:2}},{selector:"#progress-prompt,#progress-seekline",attr:["width"]},{selector:"#progress-ball .progress-ball",attr:{width:15,height:15}},{selector:"#mplayer-toast",attr:["fontSize"]},{selector:"#mplayer-footer .spot",attr:["height","width"]}]),e?(n="@-webkit-keyframes mp-bezel-fadeout {from{opacity: 1;}to{opacity: 0;-webkit-transform: scale("+1.5*g+");transform: scale("+1.5*g+");}}@keyframes mp-bezel-fadeout {from{opacity: 1;}to{opacity: 0;-webkit-transform: scale("+1.5*g+");transform: scale("+1.5*g+");}}",l=".mp-tooltip {font-size:"+12*g+"px !important;}",i=".mp-thumbnails.thumbnails-scale {-webkit-transform: scale("+g+");-ms-transform: scale("+g+");transform: scale("+g+");-webkit-transform-origin: left bottom;-ms-transform-origin: left bottom;transform-origin: left bottom;}",r=".toast-scaling{font-size: "+14*g+"px !important;}",a=".mp-keyboard-focus .mp-menuitem:focus {box-shadow: inset 0 0 0 "+2*g+"px rgba(27,127,204,0.8) !important;}.mp-keyboard-focus .keyboard-input:focus {box-shadow: inset 0 0 0 "+2*g+"px rgba(27,127,204,0.8) !important;}",s="",b.$el.mPlayer.querySelector("#progress-container")&&(c=b.$el.mPlayer.querySelector("#progress-container").getBoundingClientRect(),u=b.$el.mPlayer.querySelector("#progress-container #progress-total").getBoundingClientRect(),s=".mplayer-footer .progress .progress-container.upper-position {margin-bottom: -"+(c.height-u.height)/2+"px !important;}"),(u=(c=document.getElementsByTagName("head").item(0)).querySelector("#player-scaling-style"))?b.$method.removeNode(c,"#player-scaling-style"):((u=document.createElement("style")).setAttribute("id","player-scaling-style"),u.setAttribute("type","text/css")),u.innerHTML=n+l+i+r+a+s,c.appendChild(u)):b.$method.removeNode(document.getElementsByTagName("head").item(0),"#player-scaling-style"),e?p.add("fullscreen-scaling"):p.remove("fullscreen-scaling"))}},showHandleIcon:function(e){var t='<svg t="1598581427609" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2856" width="24" height="24"><path d="M267.58370352 186.11160469h162.94419765v651.77679062H267.58370352zM593.47209883 186.11160469h162.94419765v651.77679062h-162.94419765z" p-id="2857" fill="#ffffff"></path></svg>',o='<svg t="1598581671973" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2357" width="24" height="24"><path d="M287.49910545 187.55999756l502.5923252 324.51242209-502.5923252 324.44000244z" p-id="2358" fill="#ffffff"></path></svg>',n='<svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="16579" width="100%" height="100%"><path d="M512 8v237.17647013h237.17647013m148.23529481 266.82352987a59.29411753 59.29411753 0 1 1-59.29411753 59.29411753 59.29411753 59.29411753 0 0 1 59.29411753-59.29411753zM512 245.17647012a326.11764741 326.11764741 0 1 0 326.11764741 326.11764741h118.58823506A444.70588247 444.70588247 0 1 1 512 126.58823506v118.58823507z m-60.77647013 140.17129482l-24.90352987 194.3068237a300.23576494 300.23576494 0 0 1 48.32470617-3.20188247c71.74588247 0 106.72941136 32.61176494 106.72941136 84.34588247a81.79623506 81.79623506 0 0 1-85.68 83.27858766 166.70541136 166.70541136 0 0 1-77.97176494-20.30823507l-13.93411753 46.99058864a191.31247013 191.31247013 0 0 0 93.9811763 22.4131763 137.76988247 137.76988247 0 0 0 146.75294123-137.71058864c0-82.21129383-63.14823506-124.93270617-136.08-124.93270617-11.26588247 0-18.67764741 1.06729383-26.68235259 1.60094123l13.3411763-95.55247012h140.82352987v-51.23011753h-184.70117629z" p-id="16580" fill="#ffffff"></path></svg>',l='<svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="16817" width="100%" height="100%"><path d="M512 1016A444.70588247 444.70588247 0 0 1 67.29411753 571.29411753a59.29411753 59.29411753 0 0 1 118.58823506 0A326.11764741 326.11764741 0 1 0 512 245.17647012V126.58823506a444.70588247 444.70588247 0 0 1 0 889.41176494z m108.50823506-360.53788247a137.76988247 137.76988247 0 0 1-146.75294123 137.71058864 190.42305877 190.42305877 0 0 1-93.9811763-22.4131763l13.63764741-46.99058864a166.70541136 166.70541136 0 0 0 77.97176493 20.30823507 82.03341136 82.03341136 0 0 0 85.97647013-83.27858766c0-51.79341136-35.28-84.34588247-106.72941136-84.34588247a304.23811753 304.23811753 0 0 0-48.62117728 3.20188247l25.2-194.3068237h184.70117728v51.23011753h-140.82352987l-13.3411763 95.55247012c8.00470617-0.53364741 15.41647013-1.60094123 26.68235259-1.60094123 72.93176494 0 136.08 42.72141136 136.08 124.93270617zM512 8v237.17647013H274.82352987z" p-id="16818" fill="#ffffff"></path></svg>',i=b.$el.mPlayer.querySelector(".mp-bezel-text-hide");switch(e){case"mouseclick":b.$data.isPlay?i.querySelector(".mp-bezel-icon").innerHTML=t:i.querySelector(".mp-bezel-icon").innerHTML=o;break;case"progress-forward":i.querySelector(".mp-bezel-icon").innerHTML=n;break;case"progress-back":i.querySelector(".mp-bezel-icon").innerHTML=l;break;case"volume-icon":i.querySelector(".mp-bezel-icon").innerHTML=f.toggleVolumeIcon()}"none"==i.style.display?i.style.display="block":(i.style.display="none",b._this._global_.webpagePlugin.handleIconTimer_1||(b._this._global_.webpagePlugin.handleIconTimer_1=setTimeout(function(){b._this._global_.webpagePlugin.handleIconTimer_1=!1,i.style.display="block"},15))),b._this._global_.webpagePlugin.handleIconTimer_2&&window.clearTimeout(b._this._global_.webpagePlugin.handleIconTimer_2),b._this._global_.webpagePlugin.handleIconTimer_2=setTimeout(function(){i.style.display="none"},400)},buildBasePanel:function(e){var t=e.querySelector("#right-part"),o=document.createElement("button");o.setAttribute("class","player-btn keyboard-input footer-control"),o.setAttribute("id","volume-switch"),o.setAttribute("control",""),o.innerHTML=f.toggleVolumeIcon(),t.insertBefore(o,t.childNodes[t.childNodes.length-1]),o.addEventListener("mouseover",f.showVolumePopup),o.addEventListener("click",f.onClickEvent),!document.pictureInPictureEnabled||e.querySelector("video").disablePictureInPicture||((n=document.createElement("button")).setAttribute("class","player-btn keyboard-input footer-control picture-in-picture"),n.setAttribute("id","picture-in-picture"),n.setAttribute("tooltip",b.$method.getLangObject().pictureInPicture),n.setAttribute("control",""),n.innerHTML=s.togglePictureIcon(),t.insertBefore(n,t.childNodes[t.childNodes.length-1]),n.addEventListener("click",s.onPictureInPicture)),a("statics");var n=(b.option.subtitle||{}).tracks;(0<p.settingConfigs.length||Array.isArray(n)&&0<n.length)&&((l=document.createElement("button")).setAttribute("class","player-btn keyboard-input footer-control"),l.setAttribute("id","setting-switch"),l.setAttribute("control",""),l.innerHTML='<svg t="1607605827678" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2386"><path d="M857.9375 512c0-49.125 30.84375-90.75 74.0625-107.34375-10.3125-40.5-26.25-78.65625-47.0625-113.71875C842.5625 309.78125 791.375 302.09375 756.6875 267.3125c-34.6875-34.6875-42.375-85.96875-23.53125-128.25C698 118.25 659.84375 102.3125 619.34375 92c-16.6875 43.21875-58.3125 74.0625-107.34375 74.0625-49.125 0-90.75-30.84375-107.34375-74.0625-40.5 10.3125-78.65625 26.25-113.71875 47.0625 18.84375 42.375 11.15625 93.5625-23.53125 128.25-34.6875 34.6875-85.96875 42.375-128.25 23.625C118.25 326 102.3125 364.15625 92 404.65625c43.21875 16.6875 74.0625 58.3125 74.0625 107.34375 0 49.125-30.84375 90.75-74.0625 107.34375 10.3125 40.5 26.25 78.65625 47.0625 113.71875C181.4375 714.21875 232.625 721.90625 267.3125 756.6875c34.6875 34.6875 42.375 85.96875 23.53125 128.25C326 905.75 364.15625 921.6875 404.65625 932c16.6875-43.21875 58.3125-74.0625 107.34375-74.0625 49.125 0 90.75 30.84375 107.34375 74.0625 40.5-10.3125 78.65625-26.25 113.71875-47.0625-18.84375-42.375-11.15625-93.5625 23.53125-128.25 34.6875-34.6875 85.96875-42.375 128.25-23.625C905.75 698 921.6875 659.84375 932 619.34375c-43.21875-16.59375-74.0625-58.21875-74.0625-107.34375zM512 627.3125c-63.65625 0-115.3125-51.65625-115.3125-115.3125s51.65625-115.3125 115.3125-115.3125 115.3125 51.65625 115.3125 115.3125-51.65625 115.3125-115.3125 115.3125z" p-id="2387" fill="#ffffff"></path></svg>',t.insertBefore(l,t.childNodes[t.childNodes.length-1]),l.addEventListener("mouseover",function(e){p.name="settingConfigs",h.showSettingPopup(e)}));var l=document.createElement("button");l.setAttribute("class","player-btn keyboard-input footer-control"),l.setAttribute("id","pagefull-switch"),l.setAttribute("tooltip",b.$method.getLangObject().pageScreen),l.setAttribute("control",""),l.innerHTML='<div class="_fullpage"controls="full-page"><svg t="1607605504727"class="icon"viewBox="0 0 1024 1024"version="1.1"xmlns="http://www.w3.org/2000/svg"p-id="2356"><path d="M948.90666667 851.69493333H75.09333333c-27.30666667 0-49.152-21.84533333-49.152-43.69066666v-655.36c0-27.30666667 21.84533333-49.152 49.152-49.152h873.81333334c27.30666667 0 43.69066667 21.84533333 43.69066666 49.152v655.36c0 27.30666667-16.384 43.69066667-43.69066666 43.69066666z m-824.66133334-87.38133333h780.97066667V196.33493333H124.24533333v567.97866667z"p-id="2357"fill="#ffffff"></path><path d="M238.93333333 496.70826667c-21.84533333 0-43.69066667-16.384-43.69066666-43.69066667v-136.53333333c0-21.84533333 16.384-43.69066667 43.69066666-43.69066667h136.53333334c21.84533333 0 43.69066667 16.384 43.69066666 43.69066667s-21.84533333 38.22933333-43.69066666 38.22933333H282.624v98.304c0 21.84533333-21.84533333 43.69066667-43.69066667 43.69066667zM785.06666667 687.85493333h-136.53333334c-21.84533333 0-43.69066667-16.384-43.69066666-43.69066666s16.384-43.69066667 43.69066666-43.69066667h92.84266667v-98.304c0-21.84533333 16.384-43.69066667 43.69066667-43.69066667s43.69066667 16.384 43.69066666 43.69066667v141.99466667c-5.46133333 21.84533333-21.84533333 43.69066667-43.69066666 43.69066666z"p-id="2358"fill="#ffffff"></path></svg></div><div class="_unfullpage"controls="unfull-page"style="display: none;"><svg t="1607605550628"class="icon"viewBox="0 0 1024 1024"version="1.1"xmlns="http://www.w3.org/2000/svg"p-id="2519"><path d="M948.90666667 851.69493333H75.09333333c-27.30666667 0-49.152-21.84533333-49.152-43.69066666v-655.36c0-27.30666667 21.84533333-49.152 49.152-49.152h873.81333334c27.30666667 0 43.69066667 21.84533333 43.69066666 49.152v655.36c0 27.30666667-16.384 43.69066667-43.69066666 43.69066666z m-824.66133334-87.38133333h780.97066667V196.33493333H124.24533333v567.97866667z"p-id="2520"fill="#ffffff"></path><path d="M375.46666667 496.70826667H238.93333333c-21.84533333 0-43.69066667-16.384-43.69066666-43.69066667s21.84533333-38.22933333 43.69066666-38.22933333h92.84266667v-98.304c0-21.84533333 16.384-43.69066667 43.69066667-43.69066667s38.22933333 21.84533333 38.22933333 43.69066667v136.53333333c0 21.84533333-16.384 43.69066667-38.22933333 43.69066667zM648.53333333 687.85493333c-21.84533333 0-43.69066667-16.384-43.69066666-43.69066666v-136.53333334c0-21.84533333 16.384-43.69066667 43.69066666-43.69066666H785.06666667c21.84533333 0 43.69066667 16.384 43.69066666 43.69066666s-16.384 43.69066667-43.69066666 43.69066667h-92.84266667v92.84266667c-5.46133333 21.84533333-21.84533333 43.69066667-43.69066667 43.69066666z"p-id="2521"fill="#ffffff"></path></svg></div>',t.insertBefore(l,t.childNodes[t.childNodes.length-1]),l.addEventListener("click",(new w.toggles).pageFull),b.$method.removeNode(e,"#back-button #back-icon-svg");l=document.createElement("button");b.$method.setElementStyle(l,{fontSize:"18px",color:"#FFFFFF",width:"auto"}),l.setAttribute("class","player-btn header-control"),l.setAttribute("id","current-time"),l.setAttribute("control",""),l.innerHTML='<div id="" style="display: none;"></div>',e.querySelector("#buttom-group").appendChild(l);e.appendChild(b.$method.createRangeIsDocFragment('<div style="display: none;"class="mp-bezel-text-hide"><div class="mp-bezel"><div class="mp-bezel-icon"></div></div></div>'));l=document.createElement("div");l.setAttribute("class","ctxmenu-wrapper"),l.setAttribute("id","ctxmenu-wrapper"),l.addEventListener("click",function(e){e.stopPropagation()}),e.appendChild(l);var i=document.createElement("div");i.setAttribute("class","mplayer-shortcut"),i.setAttribute("id","mplayer-shortcut");l=b.$method.getLangObject().shortcutsPanel;return i.innerHTML='<p class="title">'+l.title+'</p><div class="close-shortcut-panel"><svg height="100%" viewBox="0 0 24 24" width="100%"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z" fill="#fff"></path></svg></div><ul><li><label>'+l.space+"：</label><span>"+l.spaceAction+"</span></li><li><label>Esc：</label><span>"+l.esc+"</span></li></ul><ul><li><label>↑：</label><span>"+l.up+"</span></li><li><label>↓：</label><span>"+l.down+"</span></li></ul><ul><li><label>→：</label><span>"+l.right+"</span></li><li><label>←：</label><span>"+l.left+"</span></li></ul>",i.addEventListener("click",function(e){e.stopPropagation()}),i.addEventListener("dblclick",function(e){e.stopPropagation()}),i.addEventListener("mouseup",function(e){e.stopPropagation()}),i.querySelector(".close-shortcut-panel").addEventListener("click",function(){i.style.display="none"}),e.appendChild(i),v._createDanmakuInput&&v._createDanmakuInput(e),v._createSeekLine&&v._createSeekLine(e),e},initConfigControls:function(e){1!=b.option.live&&((i=document.createElement("button")).setAttribute("class","player-btn footer-control keyboard-input"),i.setAttribute("style","color: white;display: flex;align-items: center;width: auto;"),i.innerHTML='<div class="progress-begin" id="progress-begin"style="width: initial;margin-right: 5px;font-size: inherit;">'+b.$method.getLangObject().begin+'</div><div class="time-symbol">/</div><div class="progress-long" id="progress-long" style="color: #dddddd;width: initial;margin-left: 5px;font-size: inherit;">'+b.$method.getLangObject().end+"</div>",b.$method.setElementStyle(i,{color:"#FFFFFF",display:"flex",width:"auto"}),b.$method.removeNode(e,"#progress-begin"),b.$method.removeNode(e,"#progress-long"),e.querySelector("#left-part").appendChild(i)),e.querySelector("#progress-ball")&&e.querySelector("#progress-ball").classList.add("default-scale"),e.querySelector(".progress-ball")&&(e.querySelector(".progress-ball").style.height="15px"),e.querySelector(".progress-ball")&&(e.querySelector(".progress-ball").style.width="15px"),e.querySelector("#progress-container")&&e.querySelector("#progress-container").setAttribute("style","left: 12px;right: 12px;"),e.querySelector("#touch-effective")&&(e.querySelector("#touch-effective").style.margin="0");for(var t=e.querySelectorAll("#progress-total,#progress-buffered,#progress-play"),o=0;o<t.length;o++)t[o]&&t[o].classList.add("progress-default-scale");var n=f.getStorageVolume(),l=n.expiration,i=n.muted,n=n.volume;return"number"==typeof l&&l>(new Date).getTime()?("boolean"==typeof i&&(e.querySelector("video").muted=i),"number"==typeof n&&(e.querySelector("video").volume=0<n&&n<100?Number.parseInt(n)/100:1)):(n=b.option.volume,f.setStorageVolume(0<=n&&n<=1?100*n:100)),!0===b.option.muted&&(e.querySelector("video").muted=!0,f.setStorageVolume(null,!0)),e=w.buildBasePanel(e)},onDurationChange:function(e){v._addPrompt&&v._addPrompt(e.duration,"durationChangeSymbol")},onFullscreenChange:function(e){b._this._global_.isReady&&(v.toggleDanmakuStatus&&v.toggleDanmakuStatus(e),e.fullscreen?((new w.toggles).pageFull("change"),(new w.toggles).timeControls(!0),(new w.toggles).scaleControls(!0)):((new w.toggles).scaleControls(!1),(new w.toggles).timeControls(!1),(new w.popupInstance).togglePopupVisible("OFF")))},onControlsToggle:function(e){e.show||(new w.popupInstance).togglePopupVisible("OFF"),b.$data.isFullScreen&&(new w.toggles).timeControls(e.show);function t(e){b.$el.mPlayer.style.cursor=e}b._this._global_.webpagePlugin.timer_2&&clearTimeout(b._this._global_.webpagePlugin.timer_2),e.show||!b.$data.isFullScreen&&!b._this._global_.webpagePlugin.isPagefull?t("default"):b._this._global_.webpagePlugin.timer_2=setTimeout(function(){b.$data.isShowRightSidebar||t("none")},1e3)},onReady:function(){var e;"function"==typeof b.$el&&(e=new b.$el,b.$el=e),!0===b.option.initFullFixed&&(new w.toggles).pageFull("initFullFixed"),w.addFocusKeyboardHandle(),w.addControlTooltip(),w.toggleEventListenerGlobal("add","playerReady"),t.addProto(),v._addPrompt&&v._addPrompt("","readyChangeSymbol")},onDestroy:function(){w.toggleEventListenerGlobal("remove","playerDestroy")},onError:function(){w.toggleEventListenerGlobal("remove","playerError")},onAction:function(e){var t="add"==e?"on":"off";b._this[t]("duration-change",w.onDurationChange),b._this[t]("fullscreen-change",w.onFullscreenChange),b._this[t]("controls-toggle",w.onControlsToggle),b._this[t]("ready",w.onReady,"MASTER"),b._this[t]("error",w.onError),setTimeout(function(){b._this[t]("destroy",w.onDestroy)})},vaks:function(){return!1},toggleEventListenerGlobal:function(e,t){var o="add"==e?"addEventListener":"removeEventListener";b._this._global_.webpagePlugin.eventStatus=o;b.$el.touchEffective instanceof Element&&b.$el.touchEffective[o]("mouseover",w.onEffectiveOverEvent),b.$el.mPlayer&&b.$el.mPlayer[o]("mousemove",w.onMpMousemoveEvent),b.$el.mPlayer&&!0===y.leaveHiddenControls&&b.$el.mPlayer[o]("mouseleave",w.onMpMouseleaveEvent),b.$el.mPlayer&&b.$el.mPlayer[o]("keydown",n.onDocKeydown),b.$el.mPlayer&&b.$el.mPlayer[o]("mouseup",c.createCtxmenu),b.$el.mPlayer&&b.$el.mPlayer[o]("contextmenu",c.onContextmenuEvent),"playerDestroy"==t&&w.onAction("remove")}};this.addProto=function(){},this.interface=function(t){this._onAgentMpTap=function(e){if("click"==e)return b.$method.onPlayTap({type:"dblscreen"}),w.showHandleIcon("mouseclick"),void("removeEventListener"==b._this._global_.webpagePlugin.eventStatus&&this._addEvent());"dbclick"!=e||w.vaks()&&b.$el.mPlayer.hasAttribute("miniplayer")||b.$method.fullToggle(t)},this._removeEvent=function(){w.vaks()&&w.toggleEventListenerGlobal("remove","activeRemove")},this._addEvent=function(){w.vaks()&&w.toggleEventListenerGlobal("add")}},this.appendTemplate=function(e,t){b={},b=t,console.info("loading mui player desktop plugin...");return Object.keys(v).forEach(function(e){delete v[e]}),w.onAction("add"),e=w.initConfigControls(e)},this.name="MuiPlayerDesktopPlugin"}});